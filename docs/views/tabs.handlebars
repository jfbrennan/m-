<h1 class="mar-b-xs">Tabs</h1>
<h2 class="txt-gray-5 mar-t-none">Master-detail pattern for navigating content</h2>
<h2 id="demo">Demo</h2>
<code-sample>
<template>
  <m-tabs role="tablist">
    <button role="tab" aria-selected="true">A</button>
    <button role="tab">B</button>
    <a href="/" role="tab">C</a>
  </m-tabs>
  <p class="txt-xs txt-gray-5">See <a href="#select-tab">selecting tabs</a> to learn how to select the tabs</p>
</template>
</code-sample>
<h2 id="api">API</h2>
<h3 id="tag">Tags</h3>
<table layout="fixed">
  <thead>
  <tr>
    <th colspan="2">Name</th>
    <th colspan="2">Type</th>
    <th colspan="6">Content</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td colspan="2"><code>m-tabs</code></td>
    <td colspan="2">Custom tag</td>
    <td colspan="6"><code>button</code> or <code>a</code> children</td>
  </tr>
  </tbody>
</table>
<h3 id="attributes">Attributes</h3>
<table layout="fixed">
  <thead>
  <tr>
    <th colspan="2">Name</th>
    <th colspan="2">Value</th>
    <th colspan="6">Description</th>
  </tr>
  </thead>
</table>
<p>For <span class="fnt-bold">m-tabs</span> only:</p>
<table layout="fixed">
  <tbody>
  <tr>
    <td colspan="2"><code>scrollable</code></td>
    <td colspan="2">Boolean attribute</td>
    <td colspan="6">Makes the tab list horizontally scrollable. In some cases, like flex grow, overflow doesn't happen and so the parent element will need an explicit width (try the <code>full-width</code> utility class).</td>
  </tr>
  </tbody>
</table>
<p>For tab only:</p>
<table layout="fixed">
  <tbody>
  <tr>
    <td colspan="2"><code>aria-selected</code></td>
    <td colspan="2">true or false</td>
    <td colspan="6">Set the selected tab to true.</td>
  </tr>
  <tr>
    <td colspan="2"><code>disabled</code></td>
    <td colspan="2">Boolean attribute</td>
    <td colspan="6">Disables the tab.</td>
  </tr>
  </tbody>
</table>
<h2 id="guidelines">Guidelines</h2>
<h3 id="select-tab">Selecting tabs</h3>
<h4>Selecting the tab</h4>
<p>Setting the selected tab is handled by your app. There are a few approaches you can take to manage this, but event delegation and setting the <code>ariaSelected</code> property is probably the best vanilla solution:</p>
<code-sample>
  <script>
    // Set ariaSelected property on all tabs except the one with matching id
    const selectTab = e => e.currentTarget.querySelectorAll('[role=tab]').forEach(tab => tab.ariaSelected = tab.id === e.target.id);
  </script>
  <m-tabs onclick="selectTab(event)">
    <button id="a" role="tab">A</button>
    <button id="b" role="tab">B</button>
  </m-tabs>
</code-sample>
<h4>Opening the tab panel</h4>
<p>This component assumes nothing about what happens when a tab is selected. This allows for multiple use cases like toggling between tab panels in the DOM or navigating to a new page or something else. Here's a simple example:</p>
<code-sample readonly="readonly">
  <script>
    function switchTab(e) \{
      // Note that e.target can be a child element, like an icon in the tab, so get the actual tab element if needed.
      const selectedTabId = e.target.closest('[role=tab]').id;

      // Select the tab and its panel
      e.currentTarget.querySelectorAll('[role=tab]').forEach(tab => tab.ariaSelected = tab.id === selectedTabId);
      document.querySelectorAll('[role=tabpanel').forEach(panel => panel.hidden = panel.dataset.tabId !== selectedTabId);
    }
  </script>
</code-sample>
<p>Here's the same thing with a more declarative approach using Riot.js, for example:</p>
<code-sample readonly="readonly">
  <template>
    <my-app>
      <m-tabs onclick="{switchTab}">
        <button id="a" aria-selected="{state.tab === 'a'}">A</button>
        <button id="b" aria-selected="{state.tab === 'b'}">B</button>
      </m-tabs>
      <div if="{state.tab === 'a'}" role="tabpanel">A tab panel</div>
      <div if="{state.tab === 'b'}" role="tabpanel">B tab panel</div>

      <script>
        export default {
          switchTab(e) {
            this.update({tab: e.target.id});
          }
        }
      </script>
    </my-app>
  </template>
</code-sample>

<h3 id="a11y">Accessibility</h3>
<p>All of the necessary ARIA attributes are here in the example below:</p>
<code-sample readonly="readonly">
<template>
  <m-tabs role="tablist">
    <button id="a" aria-controls="a-panel" role="tab">A</button>
    <button id="b" aria-controls="b-panel" role="tab">B</button>
  </m-tabs>
  <div id="a-panel" role="tabpanel" aria-labelledby="a">
    This content is shown when the "a" Tab is selected.
  </div>
  <div id="b-panel" role="tabpanel" aria-labelledby="b">
    This content is shown when the "b" Tab is selected.
  </div>
</template>
</code-sample>
